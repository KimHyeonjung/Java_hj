<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="auction.dao.AuctionDAO">
	<insert id="insertAuctionStart" useGeneratedKeys="true" keyProperty="auction.au_num">
		insert into auction(au_name, au_start_price) 
		values
			(#{auction.au_name}, #{auction.au_start_price})
	</insert>
	<insert id="insertBid">
		insert into bid(bi_au_num, bi_me_id, bi_price) values(#{bi_au_num}, #{bi_me_id}, #{bi_price})
	</insert>
	<update id="updateAuction">
		update auction 
		set
			au_winning_bid = #{wb.bi_price},
			au_me_id = #{wb.bi_me_id}
		where
			au_num = #{au_num}
	</update>
</mapper>


